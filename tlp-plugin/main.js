/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var c=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var f=(o,n)=>{for(var e in n)c(o,e,{get:n[e],enumerable:!0})},v=(o,n,e,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of u(n))!m.call(o,t)&&t!==e&&c(o,t,{get:()=>n[t],enumerable:!(i=g(n,t))||i.enumerable});return o};var w=o=>v(c({},"__esModule",{value:!0}),o);var E={};f(E,{default:()=>r});module.exports=w(E);var s=require("obsidian"),T={mySetting:"default"},y={red:"#ff2a2a",amber:"#ffbf00","amber+strict":"#ffbf00",yellow:"#ffbf00",green:"#2aff2a",white:"#ffffff",clear:"#ffffff"},r=class extends s.Plugin{async onload(){await this.loadSettings(),this.initializeTlpIndicators(),this.initializeTlpBanner(),this.addRibbonIcon("dice","Sample Plugin",t=>{new s.Notice("This is a notice!")}).addClass("my-plugin-ribbon-class"),this.addStatusBarItem().setText("Status Bar Text"),this.addCommand({id:"open-sample-modal-simple",name:"Open sample modal (simple)",callback:()=>{new p(this.app).open()}}),this.addCommand({id:"sample-editor-command",name:"Sample editor command",editorCallback:(t,a)=>{console.log(t.getSelection()),t.replaceSelection("Sample Editor Command")}}),this.addCommand({id:"open-sample-modal-complex",name:"Open sample modal (complex)",checkCallback:t=>{if(this.app.workspace.getActiveViewOfType(s.MarkdownView))return t||new p(this.app).open(),!0}}),this.addSettingTab(new d(this.app,this)),this.registerDomEvent(document,"click",t=>{console.log("click",t)}),this.registerInterval(window.setInterval(()=>console.log("setInterval"),5*60*1e3))}onunload(){}async loadSettings(){this.settings=Object.assign({},T,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}getTlpColor(e){var l;let i=this.app.metadataCache.getFileCache(e),t=i==null?void 0:i.frontmatter,a=(l=t==null?void 0:t.tlp)!=null?l:t==null?void 0:t.TLP;if(a){let h=y[a.toLowerCase()];if(h)return h}return null}updateFileIndicator(e){document.querySelectorAll(".nav-file-title").forEach(t=>{if(t.getAttribute("data-path")===e.path){let a=t.querySelector(".tlp-indicator");a||(a=document.createElement("span"),a.classList.add("tlp-indicator"),t.prepend(a));let l=this.getTlpColor(e);l?(a.style.backgroundColor=l,a.style.display="inline-block"):a.style.display="none"}})}updateAllFileIndicators(){this.app.vault.getMarkdownFiles().forEach(e=>this.updateFileIndicator(e))}initializeTlpIndicators(){this.app.workspace.onLayoutReady(()=>this.updateAllFileIndicators()),this.registerEvent(this.app.metadataCache.on("changed",e=>{e instanceof s.TFile&&this.updateFileIndicator(e)})),this.registerEvent(this.app.vault.on("rename",e=>{e instanceof s.TFile&&this.updateFileIndicator(e)}))}getTlpLevel(e){var l;let i=this.app.metadataCache.getFileCache(e),t=i==null?void 0:i.frontmatter,a=(l=t==null?void 0:t.tlp)!=null?l:t==null?void 0:t.TLP;return a?a.toUpperCase():null}updateBanner(e){let i=this.app.workspace.getActiveViewOfType(s.MarkdownView);if(!i)return;let t=i.contentEl.querySelector(".tlp-banner");if(t||(t=document.createElement("div"),t.classList.add("tlp-banner"),i.contentEl.prepend(t)),!e){t.style.display="none",t.classList.remove("show");return}let a=this.getTlpColor(e),l=this.getTlpLevel(e);a&&l?(t.textContent=`TLP: ${l}`,t.setAttribute("data-tlp",l),t.style.backgroundColor=a,t.style.display="block",t.classList.remove("show"),t.offsetWidth,t.classList.add("show")):(t.style.display="none",t.classList.remove("show"))}initializeTlpBanner(){this.app.workspace.onLayoutReady(()=>{this.updateBanner(this.app.workspace.getActiveFile())}),this.registerEvent(this.app.workspace.on("file-open",e=>this.updateBanner(e))),this.registerEvent(this.app.metadataCache.on("changed",e=>{let i=this.app.workspace.getActiveFile();i&&e.path===i.path&&this.updateBanner(e)}))}},p=class extends s.Modal{constructor(n){super(n)}onOpen(){let{contentEl:n}=this;n.setText("Woah!")}onClose(){let{contentEl:n}=this;n.empty()}},d=class extends s.PluginSettingTab{constructor(e,i){super(e,i);this.plugin=i}display(){let{containerEl:e}=this;e.empty(),new s.Setting(e).setName("Setting #1").setDesc("It's a secret").addText(i=>i.setPlaceholder("Enter your secret").setValue(this.plugin.settings.mySetting).onChange(async t=>{this.plugin.settings.mySetting=t,await this.plugin.saveSettings()}))}};
